# Explaining the soft delete (non-destructive delete) PR

## Short explanation

The BE API needs to receive all the data they sent, plus any new data. This means we can't send the table with only the data we want to be used for the table. Enter non-destructive delete! This feature removes rows and columns that were created locally (but never sent to the API). For rows and columns that were not created locally (i.e. they were returned from the Rubric API), this feature will only set their `action` property to `delete`. This will tell the BE to handle that column or row.

### In practice:

If a user created a row or column locally and then deleted it, then the row or column will truly get removed from the table structure. If the user deletes a row or column that was previously saved (aka returned by the rubric API), then the row or column will just have its `action` property set to `delete`, but it will stay in the table. 

## New (or new to us) keys

- `isMarkedForDeletion` - SetupTableDataForTWRRAC applies this to all NON-HEADER table cells. When `isNonDestructiveDelete` is true, this is the key/value pair we update. In TWRRAC.vue, we use `isMarkedForDeletion` to help determine which cells to hide
- `isCreatedLocally` - SetupTableDataForTWRRAC applies this to all NEW table cells. This will help us know which columns and rows we can safely remove from the table, and which we can't (because the BE needs to receive all the deleted columns/rows they sent).
- `action` - This key comes from BE. It can be either `update` or `delete`. If the `action` is `delete,` this alerts the BE that the row or column should be deleted. If the `action` is `update`, it alerts the BE that the data being passed should not be _added_ to the row/column, but rather should update the existing data.
- `rowIndex` - this is a property from BE; currently unused by FE since FE already has `rowId`, an incrementer which gets applied to rows both from the BE and created locally.
- `colIndex`: this is a property from BE; currently unused by FE since FE already has `colId`, an incrementer which gets applied to rows both from the BE and created locally.

### Obsolete

- `isFromAPI` - RubricTable applies this to ALL table cells. Helps us in the case we have added a row or column locally, and then deleted that row or column. When this is the case, we don't want to send these cells to the BE (or else they'll be considered new rows/columns).

## Maybe TODOs?

- Goal: Get rid of `isCriteria`
We are not using `isCriteria` for much, actually! We've got `isRowScope` and I think that could stand in. I can't think of any place where something would be `isCriteria` true but `isRowScope` false.